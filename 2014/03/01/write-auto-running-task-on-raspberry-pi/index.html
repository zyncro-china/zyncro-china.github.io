<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
    <title>Write auto running task on raspberry pi</title>
    <meta content='' name='description'>
    <meta content='width=device-width' name='viewport'>
    <link href='/css/normalize.css' rel='stylesheet'>
    <link href='/css/main.css' rel='stylesheet'>
    <link href='/css/bootstrap.min.css' rel='stylesheet'>
    <link href='/stylesheets/background.css' rel='stylesheet'>
    <link href='/stylesheets/article.css' rel='stylesheet'>
    <script src='/js/vendor/modernizr-2.6.1.min.js'></script>
    <script src='/js/vendor/jquery-1.8.0.min.js'></script>
    <script src='/js/bootstrap.min.js'></script>
    <link href="/stylesheets/rouge.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/home.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header>
      <nav class='navbar navbar-default' role='navigation'>
        <div class='navbar-header'>
          <button class='navbar-toggle' data-target='.navbar-ex1-collapse' data-toggle='collapse' type='button'>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
          </button>
          <a class='navbar-brand'></a>
        </div>
        <div class='collapse navbar-collapse navbar-ex1-collapse'>
          <ul class='nav navbar-nav'>
            <li>
              <a href='/'>Home</a>
            </li>
            <li>
              <a href='/feed.xml'>Feed</a>
            </li>
            <li>
              <a href='/about'>About</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <section class='main'>
      <div id='main' role='main'>
        <div class='container'>
          <article>
            <div class='title'>
              <h1 class='page-header text-center'>
                Write auto running task on raspberry pi
              </h1>
            </div>
            <br>
            <h3>A cheap board running complete linux OS</h3>
            
            <p>Not like Arduino, the Raspberry Pi board can run a full linux OS and also have
            GPIO pins, so there are more thing could be done on the Raspberry Pi. Now
            I need to find out how to run some task automatically when the board boots.</p>
            
            <h3>Install Upstart package</h3>
            
            <p>When install upstart, it ask some message that make me worry:</p>
            <pre class="highlight text">
            You are about to do something potentially harmful.
            To continue type in the phrase &#39;Yes, do as I say!&#39;
            
            
            ...
            Installing new version of config file /etc/modprobe.d/fbdev-blacklist.conf ...
            Installing new version of config file /etc/init.d/udev ...
            initctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused
            [ ok ] Stopping the hotplug events dispatcher: udevd.
            [ ok ] Starting the hotplug events dispatcher: udevd.
            update-initramfs: deferring update (trigger activated)
            Setting up libjson0:armhf (0.10-1.2) ...
            Setting up upstart (1.6.1-1) ...
            Processing triggers for initramfs-tools ...
            </pre>
            <p>I follow the instruments and reboot. Then it can&rsquo;t boot to the login prompt again.</p>
            
            <p>After re-write the new image to the SDCard, and the above process runs fine.</p>
            
            <h3>Write a new upstart task</h3>
            
            <h4>check the syntax</h4>
            
            <ol>
            <li>init-checkconf -d myservice.conf</li>
            </ol>
            
            <p>Notes: a work around when the checking meets error: &ldquo;ERROR: failed to ask
            Upstart to check conf file&rdquo;</p>
            
            <p><a href="https://bugs.launchpad.net/upstart/+bug/881885">init-checkconf bug</a></p>
            <pre class="highlight text">
            sudo apt-get install dbus-x11
            eval `dbus-launch --auto-syntax`
            </pre>
            <h4>list the service</h4>
            
            <p>initctl list</p>
          </article>
          <div id="disqus_thread"></div>
                      <script type="text/javascript">
                      //<![CDATA[
                          (function() {
                              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                              dsq.src = '//zyncrochinadevblog.disqus.com/embed.js';
                              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                      //]]>
                      </script>
                      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                  </script>
        </div>
      </div>
    </section>
    <footer>
      <script type="text/javascript">
      //<![CDATA[
        var _gaq=[['_setAccount','UA-44086232-1'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
      //]]>
      </script>
    </footer>
  </body>
</html>

